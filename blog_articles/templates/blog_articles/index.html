{% extends 'blog_articles/base.html' %}
{% load blog_tags %}
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}主页{% endblock %}</title>
    {% load markdown_deux_tags %}
    {% block extrastyle %}
        <style>
            h5#bigger {
                font-weight: bold;
                color: rgba(35, 51, 51, 0.73);
            }

            .pag li {
                float: left;
                list-style: none;
            }

            #title {
                text-align: center;
                font-family: NotoSans, SansSerif;
                font-size: 250%;
            }
        </style>
    {% endblock extrastyle %}
    {% block extrahead %}
        <link rel="stylesheet" href="">
    {% endblock extrahead %}
    {#draceditor的渲染标签#}
    {% load dractags %}
    {% load el_pagination_tags %}
</head>
<body>
{% block content %}
    <div class="am-g am-g-fixed">
        <br>
        <!--文章列表-->
        <div class="am-u-md-8">
            {% paginate article_list %}
            {% for article in article_list %}
                <article class="am-article">
                    <div class="am-article-hd">
                        <h1 class="am-article-title" id="title">
                            <a href="{% url 'blog:detail' article.pk %}"> {{ article.title }}</a></h1>
                        <div class="am-article-meta">
                            <h5 id="bigger" style="text-align: center">
                                <span class="am-icon-male am-icon-md"></span>&nbsp;&nbsp;{{ article.author }}&nbsp;
                                <span class="am-icon-clock-o am-icon-md"></span>&nbsp;&nbsp;{{ article.create_time }}&nbsp;&nbsp;
                                <span class="am-icon-edit am-icon-md"></span>&nbsp;&nbsp;{{ article.modified_time }}
                            </h5>
                        </div>
                    </div>
                    <div class="am-article-bd">
                        {% if article.abstract == None %}
                            <p></p>
                        {% else %}
                            <div class="am-article-lead back" style="border: hidden">
                                <h5>文章摘要:</h5>
                                {{ article.abstract }}
                            </div>
                        {% endif %}
                        <hr data-am-widget="divider" style="" class="am-divider am-divider-default"/>
                        <div class="am-panel am-panel-default back" style="border: hidden">
                            <main class="am-panel-bd bodybak articlefont">
                                {# truncatewords_html：文章太长截取#}
                                {{ article.body| safe_markdown| truncatewords_html:35 }}
                                <a href="{% url 'blog:detail' article.pk %}">阅读全文>>></a>
                            </main>
                            <footer class="am-panel-footer back">
                                <p><span class="am-icon-star am-icon-md"></span>&nbsp;<a
                                        href="{% url 'blog:category' article.category.id %}">{{ article.category }}</a>
                                </p>
                                <p>
                                    <span class="am-icon-tags am-icon-md"></span>
                                    <!--使用for循环才能显示出标签，否则获取不了数据-->
                                    {% for tag in article.tag.all %}
                                        <a href="{% url 'blog:tag' tag.id %}">{{ tag }}</a>&nbsp;
                                    {% endfor %}
                                </p>
                            </footer>
                        </div>
                    </div>
                </article>
                <hr data-am-widget="divider" style="" class="am-divider am-divider-dashed">
                <br>
            {% endfor %}
            {% get_pages %}
            <ul class="am-pagination am-pagination-centered">
                <li>{{ pages.previous }}</li>
                <li>{{ pages.first_as_arrow }}</li>
                <li>{{ pages.current }}</li>
                <li>{{ pages.last_as_arrow }}</li>
                <li>{{ pages.next }}</li>
            </ul>

        </div>

        <!--侧边栏-->
        <div class="am-u-md-4">
            <!--文章热门分类面板-->
            <div class="am-panel am-panel-default">
                <!--只显示新增加的前5个分类，其他的要点击查看更多进入到分类页面去看-->
                <div class="am-panel-hd" style="background-color: #edfff4">热门分类</div>
                <div class="am-panel-bd">
                    <ul>
                        {% for category in category_list %}
                            <li><a href="{% url 'blog:category' category.id %}">{{ category.name }}</a></li>
                        {% empty %}
                            <li><a href="{% url 'blog:categories' %}">查看更多>>></a></li>
                        {% endfor %}
                    </ul>
                    <a href="{% url 'blog:categories' %}"
                       class="am-btn am-round am-btn-xs am-btn-warning">查看更多>>></a>
                </div>
            </div>


            <div class="am-panel-group color-panel-group" id="accordation">
                <!--文章标签面板-->
                <div class="am-panel am-panel-default color-panel-border">
                    <div class="am-panel-hd" data-am-collapse="{parent: '#accordion', target: '#tags'}">文章标签</div>
                    <div class="am-panel-bd am-collapse" id="tags">
                        {% for tag in tag_list %}
                            <a href="{% url 'blog:tag' tag.pk %}"
                               id="tagcloud"
                               class="am-badge am-radius am-text-sm">{{ tag }}</a>
                        {% endfor %}
                        <!--随机颜色标签云-->
                        <script>
                            window.onload = function () {
                                var tagcloud = document.getElementById('tags');
                                var oa = tagcloud.getElementsByTagName('a');
                                for (var i = 0; i < oa.length; i++) {
                                    oa[i].style.background = "rgb(" + parseInt(Math.random() * 255) + ","
                                        + parseInt(Math.random() * 255) + ","
                                        + parseInt(Math.random() * 255) + ")";
                                }
                            }
                        </script>
                    </div>
                </div>

                <!--文章归档面板-->
                <div class="am-panel am-panel-default color-panel-border">
                    <div class="am-panel-hd" data-am-collapse="{parent: '#accordion', target: '#archive'}">文章归档
                    </div>
                    <div class="am-panel-bd am-collapse" id="archive">
                        <ul>
                            <li class="am-icon-calendar">
                                {% archives as date_list %}
                                {% for date in date_list %}
                                    <a href="{% url 'blog:archive' date.year %}">&nbsp;{{ date.year }} 年</a>
                                {% endfor %}
                            </li>
                        </ul>
                    </div>
                </div>

                <!--联系我面板-->
                <div class="am-panel am-panel-default color-panel-border">
                    <div class="am-panel-hd" data-am-collapse="{parent: '#accordion', target: '#contact'}">
                        联系我
                    </div>
                    <div class="am-panel-bd am-collapse" id="contact">
                        <p>
                            <a href="https://github.com/jerry0734" target="_blank"
                               class="am-icon-btn am-icon-github "></a>
                            <a href="http://weibo.com/jerryxjy" target="_blank"
                               class="am-icon-btn am-warning am-icon-weibo"></a>
                            <a class="am-icon-btn am-success am-icon-wechat"
                               data-am-modal="{target: '#my-wechat'}"></a>
                            <a class="am-icon-btn am-primary am-icon-qq"
                               data-am-modal="{target: '#my-qq'}"></a>
                            <a href="mailto:jerry34@foxmail.com"
                               class="am-icon-btn am-secondary am-icon-envelope-o"></a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--点击联系我-微信图标弹出的遮罩层-->
    <div class="am-modal am-modal-alert" tabindex="-1" id="my-wechat">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">Wechat
                <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close>&times;</a>
            </div>
            <div class="am-modal-bd">
                <p>Wechat ID: xjy_jerry</p>
                <img src="https://jerry002-1252474564.cosgz.myqcloud.com/mmqrcode1492430307368.png" height="50%"
                     width="50%">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn">确定</span>
            </div>
        </div>
    </div>

    <!--点击联系我-QQ图标弹出的遮罩层-->
    <div class="am-modal am-modal-alert" tabindex="-1" id="my-qq">
        <div class="am-modal-dialog">
            <div class="am-modal-hd">QQ
                <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close>&times;</a>
            </div>
            <div class="am-modal-bd">
                <p>QQ: 891192183</p>
                <img src="https://jerry002-1252474564.cosgz.myqcloud.com/qrcode.jpg" height="50%" width="50%">
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn">确定</span>
            </div>
        </div>
    </div>
{% endblock content %}
</body>
</html>



